(function(a){a.fn.karousel=function(b){function t(){clearTimeout(n);if(b.animationType=="fade"){a(e[g]).fadeOut(200);a(e[h]).fadeIn(b.animationSpeed)}else if(b.animationType=="slide"){j.animate({"margin-left":-1*i*h},b.animationSpeed)}else{throw"Animation Type "+b.animationType+" not supported"}if(b.indicators){p[g].removeClass("current");p[h].addClass("current")}if(b.auto){if(b.clickstop&&!o)n=setTimeout(u,b.pause)}g=h}function u(){if(g==f-1)h=0;else h=g+1;t()}function v(){if(!d.hasClass("karousel"))d.addClass("karousel");if(b.animationType=="fade"){d.addClass("fading");e.each(function(b,c){if(b!=0)a(c).hide()})}else if(b.animationType=="slide"){d.addClass("sliding");var c=i*f;e.wrapAll('<div class="strip" style="width: '+c+'px" />');j=d.find(".strip")}else{throw"Animation Type "+b.animationType+" not supported"}if(b.indicators){var g=a('<ul class="indicators"></ul>');for(var m=0;m<f;m++){p[m]=a('<li data-index="'+m+'">'+m+"</li>").click(function(){o=true;h=a(this).data("index");t()});if(m==0)p[m].addClass("current");p[m].appendTo(g)}g.appendTo(d)}if(b.controls){l=a('<a href="#" class="prev"><</a>').appendTo(d).click(function(a){a.preventDefault();x()});k=a('<a href="#" class="next">></a>').appendTo(d).click(function(a){a.preventDefault();w()})}try{d[0].addEventListener("touchstart",y,false);d[0].addEventListener("touchmove",z,false);d[0].addEventListener("touchend",A,false)}catch(q){}if(b.auto){if(b.clickstop&&!o)n=setTimeout(u,b.pause)}}function w(){o=true;if(g==f-1)h=0;else h=g+1;t()}function x(){o=true;if(g==0)h=f-1;else h=g-1;t()}function y(a){q.x=r.x=event.touches[0].pageX;q.y=r.y=event.touches[0].pageY;this.isScrolling=undefined}function z(a){r.x=event.touches[0].pageX;r.y=event.touches[0].pageY}function A(a){event.preventDefault();distance=B();direction=D();if(direction=="left")w();else if(direction=="right")x()}function B(){return Math.round(Math.sqrt(Math.pow(r.x-q.x,2)+Math.pow(r.y-q.y,2)))}function C(){var a=q.x-r.x;var b=r.y-q.y;var c=Math.atan2(b,a);var d=Math.round(c*180/Math.PI);if(d<0)d=360-Math.abs(d);return d}function D(){var a=C();if(a<=45&&a>=0)return"left";else if(a<=360&&a>=315)return"left";else if(a>=135&&a<=225)return"right";else if(a>45&&a<135)return"down";else return"up"}var c={indicators:true,controls:false,auto:false,pause:4e3,clickstop:true,animationSpeed:800,animationType:"fade"};var b=a.extend(c,b);var d=a(this);var e=a(this).find(".slide");var f=e.length;var g=0;var h=1;var i=a(e[0]).width();var j,k,l;var m=0;var n;var o=false;var p=[];var q={x:0,y:0};var r={x:0,y:0};var s={x:0,y:0};v()}})(jQuery)